<div class="app-list-toolbar">
    <button type="button" class="btn btn-success" (click)="onClickAddNew()">جدید</button>
</div>

<div class="mb-3">
    <app-alert *ngIf="isLoading" AlertType="Download" TextMessage="در حال واکشی اطلاعات ..."></app-alert>
    <app-alert *ngIf="error?.message" [AlertType]="'Error'" [TextMessage]="'خطا در واکشی اطلاعات'"></app-alert>
    <app-alert *ngFor="let errorMessage of errorMessages" [AlertType]="'Error'" [TextMessage]="errorMessage"></app-alert>
    <app-alert *ngIf="roles?.length == 0 && !isLoading" AlertType="Info" TextMessage="اطلاعاتی برای نمایش وجود ندارد"></app-alert>
    <app-alert *ngIf="formSuccessful" [AlertType]="'Success'" [TextMessage]="'اطلاعات با موفقیت ثبت گردید'"></app-alert>
</div>

<div class="table-responsive app-list-table-wrap" *ngIf="roles?.length">
    <table class="table table-hover table-sm align-middle app-list-table">
        <thead>
            <tr>
                <th scope="col">نام نقش</th>
                <th scope="col">توضیحات</th>
                <th scope="col">تعداد دسترسی‌ها</th>
                <th scope="col">وضعیت پیش‌فرض</th>
                <th scope="col" class="text-end">عملیات</th>
            </tr>
        </thead>
        <tbody>
            @for (role of roles; track role.id) {
            <tr>
                <td class="fw-semibold">{{ role.name }}</td>
                <td>{{ role.description || '-' }}</td>
                <td><span class="app-list-chip">{{ role.roleActionPermissions?.length || 0 }}</span></td>
                <td>
                    <span class="app-list-chip"
                        [ngClass]="{ 'app-list-status--success': role.isDefault, 'app-list-status--danger': !role.isDefault }">
                        {{ role.isDefault ? 'پیش‌فرض' : 'عادی' }}
                    </span>
                </td>
                <td class="text-end">
                    <div class="app-list-actions flex-wrap justify-content-end">
                        <button type="button" class="btn btn-outline-primary btn-sm app-list-action"
                            (click)="onClickEdit(role)">ویرایش</button>
                        <button type="button" class="btn btn-outline-danger btn-sm app-list-action"
                            (click)="onClickDelete(role)">حذف</button>
                        <button *ngIf="!role.isDefault" type="button" class="btn btn-outline-secondary btn-sm app-list-action"
                            (click)="onClickSetDefault(role)">پیش‌فرض</button>
                    </div>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>
